<div class="d-flex justify-content-between align-items-center mb-4">
  <h1><i class="fas fa-users"></i> Library Members</h1>
  <%= link_to "Add New Member", new_member_path, class: "btn btn-primary" %>
</div>

<div class="row">
  <% @members.each do |member| %>
    <div class="col-md-6 mb-4">
      <div class="card h-100">
        <div class="card-body">
          <h5 class="card-title">
            <%= member.name %>
            <% if member.active? %>
              <span class="badge bg-success ms-2">Active</span>
            <% else %>
              <span class="badge bg-secondary ms-2">Inactive</span>
            <% end %>
          </h5>
          
          <p class="card-text">
            <strong>Email:</strong> <%= member.email %>  

            <strong>Phone:</strong> <%= member.phone %>  

            <strong>Membership Type:</strong> <%= member.membership_type&.capitalize %>  

            <strong>Member Since:</strong> <%= member.membership_date.strftime("%B %d, %Y") if member.membership_date %>
          </p>
          
          <p class="card-text">
            <strong>Current Borrowings:</strong> 
            <%= member.borrowings.where(status: 'borrowed').count %>
          </p>
        </div>
        
        <div class="card-footer">
          <%= link_to "View", member, class: "btn btn-info btn-sm" %>
          <%= link_to "Edit", edit_member_path(member), class: "btn btn-warning btn-sm" %>
          <%= link_to "Delete", member, data: { "turbo-method": :delete }, 
                      "turbo-confirm": "Are you sure?", 
                      class: "btn btn-danger btn-sm" %>
        </div>
      </div>
    </div>
  <% end %>
</div>

<% if @members.empty? %>
  <div class="text-center mt-5">
    <i class="fas fa-users fa-3x text-muted mb-3"></i>
    <h3 class="text-muted">No members found</h3>
    <p class="text-muted">Start by registering your first library member.</p>
    <%= link_to "Add First Member", new_member_path, class: "btn btn-primary" %>
  </div>
<% end %>
